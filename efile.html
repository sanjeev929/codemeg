<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Free Base64 Image & Audio Encoder Decoder – CodeMeg</title>

  <!-- SEO -->
  <meta name="description" content="Free Base64 encoder and decoder online. Convert images and audio to Base64 or decode Base64 back to files instantly. No signup required.">
  <meta name="author" content="CodeMeg">
  <meta name="robots" content="index, follow">
  <link rel="canonical" href="https://codemeg.com/base64">

  <!-- Open Graph -->
  <meta property="og:title" content="Free Base64 Image & Audio Tool">
  <meta property="og:description" content="Encode and decode Base64 images and audio instantly.">
  <meta property="og:type" content="website">

  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

  <!-- CSS -->
  <link rel="stylesheet" href="efile.css">
</head>
<body>

<header class="site-header">
  <div class="nav">
    <div class="logo">CodeMeg</div>
    <nav>
      <a href="/">Home</a>
      <a href="/base64">Base64 Tool</a>
    </nav>
  </div>
</header>

<section class="hero">
  <h1>Base64 Image & Audio Tool</h1>
  <p>Encode or decode Base64 images and audio instantly. Free & fast.</p>
</section>

<main>
  <section class="generator">

    <!-- DROPDOWN -->
    <div class="gm-dropdown" id="toolDropdown">
      <button class="gm-selected" id="toolSelected" type="button">
        <span>Image → Base64</span>
        <svg width="14" height="14" viewBox="0 0 24 24">
          <path d="M7 10l5 5 5-5" fill="none" stroke="black" stroke-width="2"/>
        </svg>
      </button>

      <div class="gm-options" id="toolOptions">
        <div data-tool="img-encode" class="active">Image → Base64</div>
        <div data-tool="img-decode">Base64 → Image</div>
        <div data-tool="audio-encode">Audio → Base64</div>
        <div data-tool="audio-decode">Base64 → Audio</div>
      </div>
    </div>

    <!-- INPUTS -->
    <input type="file" id="fileInput" accept="image/*,audio/*">
    <textarea id="base64Input" placeholder="Paste Base64 here..." hidden></textarea>

    <button id="processBtn">Process</button>

    <!-- RESULT -->
    <div id="result-section">
      <h2>Result</h2>
      <textarea id="output" readonly></textarea>

      <button id="copyBtn" hidden>Copy Base64</button>
      <button id="downloadBtn" hidden>Download File</button>

      <div id="preview"></div>
    </div>

  </section>
</main>

<footer class="site-footer">
  <p>© 2025 CodeMeg. No tracking. No login.</p>
</footer>

<!-- JS -->
<script>
    /* ==========================
   ELEMENTS
========================== */
const dropdown = document.getElementById("toolDropdown");
const selectedBtn = document.getElementById("toolSelected");
const options = document.querySelectorAll("#toolOptions div");
const fileInput = document.getElementById("fileInput");
const base64Input = document.getElementById("base64Input");
const output = document.getElementById("output");
const preview = document.getElementById("preview");
const copyBtn = document.getElementById("copyBtn");
const downloadBtn = document.getElementById("downloadBtn");

let selectedTool = "img-encode";

/* ==========================
   DROPDOWN OPEN / CLOSE
========================== */
selectedBtn.addEventListener("click", (e) => {
  e.stopPropagation();
  dropdown.classList.toggle("open");
});

document.addEventListener("click", () => {
  dropdown.classList.remove("open");
});

/* ==========================
   OPTION SELECT
========================== */
options.forEach(option => {
  option.addEventListener("click", (e) => {
    e.stopPropagation();

    selectedTool = option.dataset.tool;
    selectedBtn.querySelector("span").textContent = option.textContent;

    options.forEach(o => o.classList.remove("active"));
    option.classList.add("active");

    // Show/hide input fields
    if (selectedTool.includes("decode")) {
      fileInput.hidden = true;
      base64Input.hidden = false;
    } else {
      fileInput.hidden = false;
      base64Input.hidden = true;
    }

    resetUI();
    dropdown.classList.remove("open");
  });
});

/* ==========================
   PROCESS FILE / BASE64
========================== */
document.getElementById("processBtn").addEventListener("click", () => {
  resetUI();

  if (selectedTool.includes("encode")) {
    const file = fileInput.files[0];
    if (!file) return alert("Please select a file");

    const reader = new FileReader();
    reader.onload = () => {
      output.value = reader.result;
      copyBtn.hidden = false;
    };
    reader.readAsDataURL(file);
  } else {
    const b64 = base64Input.value.trim();
    if (!b64) return alert("Paste Base64 data");

    output.value = b64;
    downloadBtn.hidden = false;

    if (selectedTool === "img-decode") {
      const img = document.createElement("img");
      img.src = b64;
      img.className = "preview-img";
      preview.appendChild(img);
    }

    if (selectedTool === "audio-decode") {
      const audio = document.createElement("audio");
      audio.controls = true;
      audio.src = b64;
      preview.appendChild(audio);
    }
  }
});

/* ==========================
   COPY TO CLIPBOARD
========================== */
copyBtn.addEventListener("click", () => {
  navigator.clipboard.writeText(output.value);
  copyBtn.textContent = "Copied!";
  setTimeout(() => copyBtn.textContent = "Copy Base64", 1200);
});

/* ==========================
   DOWNLOAD FILE
========================== */
downloadBtn.addEventListener("click", () => {
  const a = document.createElement("a");
  a.href = output.value;
  a.download = selectedTool === "img-decode" ? "image.png" : "audio.mp3";
  document.body.appendChild(a);
  a.click();
  document.body.removeChild(a);
});

/* ==========================
   RESET UI
========================== */
function resetUI() {
  output.value = "";
  preview.innerHTML = "";
  copyBtn.hidden = true;
  downloadBtn.hidden = true;
}

</script>
</body>
</html>
